
// ====================================================================
// CRUSHSim - CRUSH Simulation web app for Ceph admins
// ---------------------------------------------------
// 
// By Xavier Villaneau, 2015
// xavier.villaneau@fr.clara.net or xvillaneau@gmail.com
// Claranet SAS, Rennes, France
// ====================================================================
// map-list.js - jQuery for displaying a list of saved CRUSH maps
//  - To be used only on pages where the code for said list has already
//    been generated by the server, along with a pre#crush-map-preview
//  - Makes the list pretty by making a line "active" when clicked
//  - displayCrush may be used in other cases (see analyze.js)
//
// Changelog:
// ----------
// May 4th 2015 - Initial release


// jQuery functions for CRUSHsim homepage

function displayCrush(mapid, element) {
	$.get('/crushdata/'+mapid, function(data) {
		// Get data, REST is our friend !
		element.text(data);
	});
};

$('document').ready(function(){

	$('.crush-map-avail').on('click', function(){
		// When an element in the "Saved CRUSH maps" is clicked...

		// The 'info' class is removed from the previous active <tr>
		$('.crush-map-avail.info').removeClass('info');
		$(this).addClass('info');

		// The preview panel is updated
		var id = $(this).children('.crush-map-id').text();
		displayCrush(id, $('#crush-map-preview'));
	});

});
